###############################################################################
# Inventaire Ansible pour Configuration SR-IOV IBM i
# Description: Définit les hôtes et groupes pour la configuration SR-IOV
# Instructions: Adapter les adresses IP et credentials à votre environnement
###############################################################################

###############################################################################
# Groupe: Serveurs IBM i
###############################################################################

[ibmi_servers]
# Serveur IBM i de production
ibmi_prod ansible_host=192.168.1.100 ansible_user=QSECOFR

# Serveur IBM i de test (optionnel)
# ibmi_test ansible_host=192.168.1.101 ansible_user=QSECOFR

# Serveur IBM i de développement (optionnel)
# ibmi_dev ansible_host=192.168.1.102 ansible_user=QSECOFR

###############################################################################
# Groupe: HMC (Hardware Management Console)
###############################################################################

[hmc_servers]
# HMC principale
hmc01 ansible_host=192.168.1.10 ansible_user=hscroot

# HMC secondaire (optionnel, pour redondance)
# hmc02 ansible_host=192.168.1.11 ansible_user=hscroot

###############################################################################
# Variables Communes pour IBM i
###############################################################################

[ibmi_servers:vars]
# Interpréteur Python sur IBM i (PASE)
ansible_python_interpreter=/QOpenSys/pkgs/bin/python3

# Port SSH (par défaut 22)
ansible_port=22

# Timeout de connexion (secondes)
ansible_connection_timeout=30

# Méthode de connexion
ansible_connection=ssh

# Désactiver la vérification de clé d'hôte (à adapter selon votre politique de sécurité)
# En production, utiliser une gestion appropriée des clés SSH
ansible_ssh_common_args='-o StrictHostKeyChecking=no'

# Utiliser sudo si nécessaire (généralement non requis avec QSECOFR)
# ansible_become=yes
# ansible_become_method=sudo
# ansible_become_user=root

###############################################################################
# Variables Communes pour HMC
###############################################################################

[hmc_servers:vars]
# Interpréteur Python sur HMC
ansible_python_interpreter=/usr/bin/python3

# Port SSH
ansible_port=22

# Timeout de connexion
ansible_connection_timeout=30

# Méthode de connexion
ansible_connection=ssh

###############################################################################
# Groupe: Tous les serveurs
###############################################################################

[all:vars]
# Fuseau horaire
timezone=Europe/Paris

# Locale
locale=fr_FR.UTF-8

# Niveau de log Ansible
ansible_verbosity=1

###############################################################################
# Exemples de Configurations Avancées
###############################################################################

# Configuration avec clé SSH privée spécifique:
# ibmi_prod ansible_host=192.168.1.100 ansible_user=QSECOFR ansible_ssh_private_key_file=~/.ssh/id_rsa_ibmi

# Configuration avec mot de passe (utiliser ansible-vault en production):
# ibmi_prod ansible_host=192.168.1.100 ansible_user=QSECOFR ansible_ssh_pass="{{ vault_ibmi_password }}"

# Configuration avec bastion/jump host:
# ibmi_prod ansible_host=192.168.1.100 ansible_user=QSECOFR ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -q bastion@jump.example.com"'

# Configuration avec port SSH non standard:
# ibmi_prod ansible_host=192.168.1.100 ansible_user=QSECOFR ansible_port=2222

###############################################################################
# Groupes Dynamiques (optionnel)
###############################################################################

# Groupe pour environnement de production
[production]
ibmi_prod

# Groupe pour environnement de test
# [test]
# ibmi_test

# Groupe pour environnement de développement
# [development]
# ibmi_dev

###############################################################################
# Variables par Environnement
###############################################################################

[production:vars]
environment=prod
backup_enabled=true
monitoring_enabled=true

# [test:vars]
# environment=test
# backup_enabled=false
# monitoring_enabled=true

# [development:vars]
# environment=dev
# backup_enabled=false
# monitoring_enabled=false

###############################################################################
# Notes de Sécurité
###############################################################################

# IMPORTANT: En production, utiliser ansible-vault pour chiffrer les mots de passe
# 
# Créer un fichier vault:
#   ansible-vault create group_vars/all/vault.yml
#
# Contenu du vault:
#   vault_ibmi_password: "votre_mot_de_passe_securise"
#   vault_hmc_password: "votre_mot_de_passe_hmc_securise"
#
# Utiliser dans l'inventaire:
#   ansible_ssh_pass: "{{ vault_ibmi_password }}"
#
# Exécuter le playbook avec le vault:
#   ansible-playbook -i inventory.ini configure_sriov.yml --ask-vault-pass

###############################################################################
# Vérification de l'Inventaire
###############################################################################

# Pour vérifier l'inventaire:
#   ansible-inventory -i inventory.ini --list
#   ansible-inventory -i inventory.ini --graph
#
# Pour tester la connectivité:
#   ansible -i inventory.ini ibmi_servers -m ping
#   ansible -i inventory.ini hmc_servers -m ping
#
# Pour vérifier les variables:
#   ansible-inventory -i inventory.ini --host ibmi_prod

; Made with Bob
